var highlowApp={};$(function(){highlowApp.tab.init(),highlowApp.systemMessages.init(),highlowApp.graph.init(),highlowApp.marketSimulator.init(),highlowApp.oneClick.init(),highlowApp.popup.init(),highlowApp.instrumentPanelCollapser.init(),highlowApp.instrumentPanelSlider.init(),highlowApp.instrumentPanelSelector.init(),highlowApp.betSystem.init(),highlowApp.favourite.init(),highlowApp.heatmap.init(),highlowApp.tooltip.init(1e3),highlowApp.numberOnly.init()}),highlowApp.randomValue=function(e,t,a){var i=1;a&&(i=a>0?Math.pow(10,a):1);var t=t*i,e=e*i;return Math.floor(Math.random()*(t-e+1)+e)/i},highlowApp.expiring=function(){return window.location.href.indexOf("?expiring")>=0?!0:!1},highlowApp.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},highlowApp.durationToText=function(e){var t=e,a="";return remainingHour=(t-t%36e5)/36e5,remainingMinute=(t-36e5*remainingHour-(t-36e5*remainingHour)%6e4)/6e4,remainingSecond=Math.floor(t%6e4/1e3),a=0>remainingSecond&0==remainingMinute&0==remainingHour?" expired":remainingHour>0?" "+(10>remainingHour?"0"+remainingHour:remainingHour)+":"+(10>remainingMinute?"0"+remainingMinute:remainingMinute)+":"+(10>remainingSecond?"0"+remainingSecond:remainingSecond):" "+(10>remainingMinute?"0"+remainingMinute:remainingMinute)+":"+(10>remainingSecond?"0"+remainingSecond:remainingSecond)},highlowApp.timeToText=function(e){var t=new Date(e),a=t.getHours(),i=t.getMinutes(),n="";return n+=10>a?"0"+a:a,n+=":",n+=10>i?"0"+i:i},highlowApp.betSystem={bets:{},sellPopup:function(e){$(".trading-platform-sell-popup."+e.type).removeClass("concealed"),$(".trading-platform-sell-popup."+e.type+" .trading-platform-sell-popup-instrument").html(e.model.label),$(".trading-platform-sell-popup."+e.type+" .trading-platform-invevstment-value").html("$"+e.amount),$(".trading-platform-sell-popup."+e.type+" .trading-platform-pay-out-value").html("$"+parseFloat(e.amount*parseFloat($(".trading-platform-sell-popup."+e.type+" .trading-platform-return-rate-value .rate").html())).toFixed(2))},createBetEntry:function(e,t,a,i,n){var r=new Date(t.x),o=new Date(n.expireAt),s=n.strike,l=$('<tr data-uid="'+a+'"><td class="investment-select"></td><td class="investment-type '+i+'"></td><td class="investment-asset">'+e.model.label+'</td><td class="investment-strike highlow-'+e.direction+'"> '+s+'</td><td class="investment-time">'+r.getHours()+":"+(r.getMinutes()>9?r.getMinutes():"0"+r.getMinutes())+'</td><td class="investment-expiry">'+o.getHours()+":"+(o.getMinutes()>9?o.getMinutes():"0"+o.getMinutes())+'</td><td class="investment-status">Opened</td><td class="investment-closing-rate">-</td><td>$<span class="investment-value">'+$("#"+i+"-investment-value-input").val()+'</span></td><td class="investment-payout font-b"></td><td class="investment-sell"><button data-investment="'+$("#investment-value-input").val()+'" class="investment-sell-btn '+i+' btn font-m btn-sm-pad">SELL</button></td></tr>');l.on("click",function(){function t(){i>o&&(highlowApp.instrumentPanelSlider.nextPage(l.data("target")),p++),o>i&&(highlowApp.instrumentPanelSlider.previousPage(s.data("target")),p++),d>p&&setTimeout(t,1.2*highlowApp.instrumentPanelSlider.slidingTime)}$('[data-target="#'+n.type+'-mode"]').click(),$('[data-target="#'+n.type+"-"+e.model.durationId+'"]').click(),$("#"+n.type+"-"+e.model.durationId+' [data-uid="'+e.model.uid+'"]').click();var a=$($("#"+n.type+"-"+e.model.durationId+" .instrument-panel-active").closest(".page")),i=a.index(),r=$("#"+n.type+"-"+e.model.durationId+" .page.active"),o=r.index(),s=$("#"+n.type+"-"+e.model.durationId+" .page-slider.backward"),l=$("#"+n.type+"-"+e.model.durationId+" .page-slider.forward"),d=Math.abs(i-o),p=0;t()}),l.on("click",".investment-sell-btn",function(t){t.preventDefault(),highlowApp.betSystem.sellPopup(e)}),$(".trading-platform-investments-list").append(l),$(".trading-platform-investments").removeClass("no-data")},updateBetEntry:function(e,t){var a,i='[data-uid="'+e.uid+'"]',n=parseFloat(e.strike).toFixed(highlowApp.marketSimulator.rounding),r=parseFloat(t.currentRate).toFixed(highlowApp.marketSimulator.rounding),o=1,s=-1,l=0;switch(e.direction){case"high":r>n&&(a=o),n>r&&(a=s),r==n&&(a=l);break;case"low":r>n&&(a=s),n>r&&(a=o),r==n&&(a=l)}e.expired?($("tr"+i+" .investment-status").html("Closed"),$("tr"+i+" .investment-closing-rate").html(e.closingRate)):a===o?($("tr"+i).removeClass().addClass("investment-winning"),$("tr"+i+" .investment-payout").html("$"+Math.floor(e.amount*e.model.payoutRate))):a===s?($("tr"+i).removeClass().addClass("investment-losing"),$("tr"+i+" .investment-payout").html("$0")):($("tr"+i).removeClass().addClass("investment-tying"),$("tr"+i+" .investment-payout").html("$"+e.amount))},confirmBet:function(e,t,a){$(".trading-select-direction-"+a+"-"+e).click(),$(".trading-platform-invest-popup."+a).removeClass("concealed")},placeBet:function(e,t){$(".trading-platform-invest-popup").addClass("concealed");var a=(new Date).getTime(),i=$("#"+t+"-graph").highcharts(),n=i.series[0],r=(i.renderer,this.bets),o=$("#"+t+"-main-view").data("instrumentModel");r[t]||(r[t]=[]);// if(bet!="high" && bet!="low") {
var s=$("#"+t+"-investment-value-input").val(),l=parseFloat(o.currentRate).toFixed(3);"spread"==t&&("high"==e&&(l=(parseFloat(o.currentRate)+highlowApp.marketSimulator.spread).toFixed(3)),"low"==e&&(l=(parseFloat(o.currentRate)-highlowApp.marketSimulator.spread).toFixed(3)));var d=o.expireAt;t.indexOf("on-demand")>=0&&(d=a+18e4);var p=n.points[n.points.length-1],e={direction:e,type:o.type,amount:s,betAt:a,strike:l,expireAt:d,point:p,model:o,focused:!0,x:p.x,uid:o.uid+"-"+p.x+"-"+(n.points.length-1),focus:function(){void 0!=o.focusedBet&&(o.focusedBet.focused=!1),o.focusedBet=e,o.focusedBet.focused=!0,highlowApp.marketSimulator.updateBetStatus(o)}};e.focus(),o.bets.push(e),highlowApp.graph.placeBet(e),this.createBetEntry(e,p,e.uid,o.type,e),highlowApp.marketSimulator.updateBetStatus(o)},init:function(){var e=this;$(".trading-platform-main-controls-select-direction .btn").click(function(){$(".trading-platform-main-controls-select-direction .btn").removeClass("active").addClass("in-active"),$(this).hasClass("active")?$(this).removeClass("active"):$(this).hasClass("highlow-up")?$(".trading-platform-main-controls-select-direction .btn.highlow-up").addClass("active").removeClass("in-active"):$(".trading-platform-main-controls-select-direction .btn.highlow-down").addClass("active").removeClass("in-active")}),$(".trading-platform-main-controls-place-bet").click(function(){var t=$('input:radio[name="'+$(this).data("direction")+'"]:checked').val(),a=$(this).data("type");return t&&""!=t?(e.placeBet(t,a),$(".trading-platform-invest-popup."+a).addClass("concealed"),$(".trading-platform-main-controls-select-direction .btn").removeClass("active").removeClass("in-active"),$('input:radio[name="'+$(this).data("direction")+'"]:checked').prop("checked",!1),void 0):(console.log("Please select high or low"),void 0)}),$(".one-touch-bet").click(function(){var t=$(this).data("direction"),a=$(this).data("type");e.placeBet(t,a)})}},highlowApp.favourite={favourite:{},itemPerPage:5,init:function(){var e=this;$(".instrument-panel").on("click",".instrument-panel-favourite",function(t){var a=$(this),i=$(a.closest(".instrument-panel")),n=i.data(highlowApp.marketSimulator.modelDataName);t.stopPropagation(),a.hasClass("faved")?e.unFavorItem(a,n):e.favorItem(a,n)})},unFavorItem:function(e,t){e.removeClass("faved"),e.attr("title","Add to Favourites");var a=this;a.favourite[t.type]&&a.favourite[t.type].map[t.uid]&&(t.favourite=!1,a.favourite[t.type].array.splice(a.favourite[t.type].array.indexOf(t),1),a.removeFromFavouriteTab(t),delete a.favourite[t.type].map[t.uid],a.rerender(t))},favorItem:function(e,t){e.addClass("faved"),e.attr("title","Remove from Favourites");var a=this;a.favourite[t.type]||(a.favourite[t.type]={map:{},array:[]}),t.favourite=!0,a.favourite[t.type].map[t.uid]=t,a.favourite[t.type].array.push(t),a.addToFavouriteTab(t)},addToFavouriteTab:function(e){var t=$("#"+e.type+"-favourite-pages .pages-wrapper"),a=$("#"+e.type+"-"+e.durationId+"-pages [data-uid='"+e.uid+"']"),i=a.clone(!0,!0);i.data(highlowApp.marketSimulator.modelDataName,a.data(highlowApp.marketSimulator.modelDataName)),i.removeClass("instrument-panel-active");var n=$("#"+e.type+"-favourite-pages .page.active"),r=(n.index(),$("#"+e.type+"-favourite-pages .pages-wrapper .page"));r.length>0&&($panels=$($(r[r.length-1]).find(".instrument-panel")));var o;r.length<=0||$panels.length>=5?(o=$('<div class="page"></div>'),r.length<=0&&o.addClass("active")):o=$(r[r.length-1]),o.append(i),t.append(o),n=$("#"+e.type+"-favourite-pages .page.active"),n.next().addClass("next"),n.prev().addClass("prev"),$("#"+e.type+"-favourite-pages .no-data").addClass("hidden"),$('.instrument-panel[data-uid="'+e.uid+'"] .instrument-panel-favourite').addClass("faved")},removeFromFavouriteTab:function(e){var t=$("#"+e.type+"-favourite-pages [data-uid='"+e.uid+"']");$("#"+e.type+"-"+e.durationId+"-pages [data-uid='"+e.uid+"'] .instrument-panel-favourite").removeClass("faved"),$("#"+e.type+"-all-pages [data-uid='"+e.uid+"'] .instrument-panel-favourite").removeClass("faved"),t.remove()},rerender:function(e){var t=this,a=$("#"+e.type+"-favourite-pages .pages-wrapper .instrument-panel"),i=$("#"+e.type+"-favourite-pages .pages-wrapper");a.detach();var n=$("#"+e.type+"-favourite-pages .page.active").index();n||(n=0);for(var r,o=$("#"+e.type+"-favourite-pages .page"),s=0;s<a.length;s++){s%t.itemPerPage==0&&(r=s/t.itemPerPage>=o.length-1?$('<div class="page"></div>'):$(o[s/t.itemPerPage]),s/t.itemPerPage==n&&r.addClass("active"));var l=$(a[s]);r.append(l),s/t.itemPerPage>=o.length-1&&i.append(r)}var d=a.length/t.itemPerPage;if(d<o.length)for(var s=o.length;s>d;s--)$(o[s-1]).remove();o=$("#"+e.type+"-favourite-pages .page"),n<o.length?$(o[n]).addClass("active").removeClass("prev").removeClass("next").css({left:"0px"}):$(o[n-1]).addClass("active").removeClass("prev").removeClass("next").css({left:"0px"});var p=$("#"+e.type+"-favourite-pages .page.active");p.next().addClass("next"),p.prev().addClass("prev"),0==a.length&&$("#"+e.type+"-favourite-pages .no-data").removeClass("hidden")}},highlowApp.graph={graphs:{},onGraphUI:{},init:function(){Highcharts.setOptions({plotOptions:{series:{animation:!1}},global:{useUTC:!1}}),this.prepareGraph("#highlow-graph"),this.prepareGraph("#spread-graph"),this.prepareGraph("#on-demand-graph",12e4),this.prepareGraph("#spread-on-demand-graph",12e4),this.graphs.highlow=Highcharts.charts[$("#highlow-graph").data("highchartsChart")],this.graphs.spread=Highcharts.charts[$("#spread-graph").data("highchartsChart")],this.graphs["on-demand"]=Highcharts.charts[$("#on-demand-graph").data("highchartsChart")],this.graphs["spread-on-demand"]=Highcharts.charts[$("#spread-on-demand-graph").data("highchartsChart")],this.mouse={x:0,y:0};var e=this;$(document).on("mousemove",function(t){e.mouse.x=t.clientX||t.pageX,e.mouse.y=t.clientY||t.pageY})},isOneClick:function(e){var t=$("#"+e.type+"-main-view");return t.hasClass(highlowApp.oneClick.className)},indexOfPointByXRecursive:function(e,t,a,i){if(a>i)return null;var n=Math.floor((a+i)/2);return e[n].x>t?this.indexOfPointByXRecursive(e,t,a,n-1):e[n].x<t?this.indexOfPointByXRecursive(e,t,n+1,i):n},loadInstrument:function(e){var t=(new Date).getTime(),a=e.type,i=this.onGraphUI;i[a]&&(i[a].highButton&&(i[a].highButton.destroy(),i[a].highButton=void 0),i[a].lowButton&&(i[a].lowButton.destroy(),i[a].lowButton=void 0)),$("#"+e.type+"-graph").highcharts().destroy(),this.prepareGraph("#"+e.type+"-graph"),this.graphs[e.type]=$("#"+e.type+"-graph").highcharts();var n=this.graphs[e.type],r=n.renderer,o=$("#"+e.type+"-graph").closest(".trading-platform-live-graph").hasClass("pushed");if(o){r.path(["M",790,5,"L",790,272]).attr({"stroke-width":1,stroke:"#252323"}).add(),r.path(["M",49,272,"L",790,272]).attr({"stroke-width":1,stroke:"#252323"}).add()}else{r.path(["M",840,5,"L",840,272]).attr({"stroke-width":1,stroke:"#252323"}).add(),r.path(["M",49,272,"L",840,272]).attr({"stroke-width":1,stroke:"#252323"}).add()}var s=n.series[0],l=JSON.parse(JSON.stringify(e.data));s.setData(l,!0,!1,!1);var d=n.xAxis[0];if(e.type.indexOf("on-demand")>=0){d.setExtremes(t-6e5,t+18e4,!0);var p=e.type+"-expiry-hint-line",m=e.type+"-expiry-hint-text";if(d.removePlotLine(p),e.bets.length>0)void 0!=e.onDemandHintText&&(e.onDemandHintText.destroy(),e.onDemandHintText=void 0);else{d.addPlotLine({color:"#606060",value:t+18e4,width:1,zIndex:1e3,id:p});var h=d.toPixels(t+18e4)-6,u=141;text=r.text("NEXT EXPIRY IN 60 SECS",h,u),text.css({"font-family":"Montserrat","font-size":"10px;",color:"white"}),text.attr({zIndex:6,id:m,transform:"translate(0,0) rotate(270 "+h+" "+u+")",width:"177px","text-anchor":"middle"}),text.add(),e.onDemandHintText=text}}else{var g=6e5;e.duration>9e5&&(g=18e5),e.duration>36e5&&(g=108e5),d.setExtremes(e.openAt-g,e.expireAt,!0);{var c=e.type+"-plot-band",v=e.type+"-start-plot-line",f=e.type+"-end-plot-line",x=e.type+"-dead-zone-line",w=e.type+"-dead-zone-band";e.type+"-start-text",e.type+"-dead-zone-text"}d.removePlotBand(c),d.addPlotBand({color:"rgba(20,20,20,0.3)",from:e.openAt,to:e.expireAt,id:c}),d.removePlotLine(v),d.addPlotLine({color:"rgba(255,255,255,0.7)",value:e.openAt,width:1,zIndex:1e3,id:v}),d.removePlotLine(f),d.addPlotLine({color:"rgba(255,255,255,0.7)",value:e.expireAt,width:1,zIndex:1e3,id:f}),d.removePlotBand(w),d.addPlotBand({from:e.deadzone,to:e.expireAt,color:{pattern:"public/trade-platform/images/deadzone-bg.png",width:4,height:4},id:w}),d.removePlotLine(x),d.addPlotLine({color:"rgba(255,255,255,0.4)",value:e.deadzone,width:1,zIndex:3,id:x});var u=10,y=d.toPixels(e.openAt)-70,b=d.toPixels(e.deadzone)-70;e.startTimeText&&e.startTimeText.element.remove(),e.deadTimeText&&e.deadTimeText.element.remove(),e.startTimeText=r.text("Start: "+highlowApp.timeToText(e.openAt),y,24),e.deadTimeText=r.text("Stop: "+highlowApp.timeToText(e.deadzone),b,24),e.startTimeText.css({color:"#838383",zIndex:10}),e.deadTimeText.css({color:"#838383",zIndex:11}),e.startTimeText.add(),e.deadTimeText.add()}s.points[s.points.length-1].update({marker:{enabled:!0,symbol:"url(public/trade-platform/images/graph-marker.png)",zIndex:1e3},states:{hover:{enabled:!1}},zIndex:1e3}),n.yAxis[0].addPlotLine({color:"#ffffff",width:1,dashStyle:"ShortDash",value:e.currentRate,zIndex:4,id:"current-value"}),this.updateOnGraphUI(e,s.points[s.points.length-1]);for(var C=0;C<e.bets.length;C++){var A=e.bets[C];e.type.indexOf("on-demand")>=0&&(A.finishLabel=void 0,A.finishText=void 0),A.point=s.points[this.indexOfPointByXRecursive(s.points,A.x,0,s.points.length-1)],this.placeBet(A)}var k=3e5;e.duration>9e5&&(k=9e5),e.duration>36e5&&(k=144e5),n.xAxis[0].update({tickInterval:k})},updateOnGraphUI:function(e,t){var a=this.onGraphUI,i=e.type;a[i]||(a[i]={}),a[i].lowRate&&(a[i].lowRate.destroy(),a[i].lowRate=void 0),a[i].highRate&&(a[i].highRate.destroy(),a[i].highRate=void 0);var n=this.graphs[e.type],r=(n.series[0],n.renderer),o=n.xAxis[0],s=n.yAxis[0];if(s.removePlotLine("current-value"),s.addPlotLine({color:"#ffffff",width:1,dashStyle:"ShortDash",value:t.y,zIndex:4,id:"current-value"}),i.indexOf("on-demand")>=0){o.setExtremes(t.x-6e5,t.x+18e4,!0);var l=e.type+"-expiry-hint-line";o.removePlotLine(l),e.bets.length>0?void 0!=e.onDemandHintText&&(e.onDemandHintText.destroy(),e.onDemandHintText=void 0):o.addPlotLine({color:"#606060",value:t.x+18e4,width:1,zIndex:1e3,id:l})}var d=s.getExtremes(),p=d.min,m=d.max,h=(m+p)/2,u=.005,g=.002,c=8,v=m,f=p;t.y>h?m-t.y<u&&(v+=u-(m-t.y),f=v-g*c,s.setExtremes(f,v,!0)):t.y-p<u&&(f-=u-(t.y-p),v=f+g*c,s.setExtremes(f,v,!0)),pointX=t.plotX,pointY=t.plotY;var x=pointX+76,w=pointY-37,y=pointX+76,b=pointY+22;(5>w||b>230)&&(w=pointY-7,x=pointX+68,b=pointY-7,y=pointX+104,"spread"==i&&(y+=69));var C="in-chart-"+i+"-high-bet",A="in-chart-"+i+"-low-bet";if(e.dead)a[i].highButton&&(a[i].highButton.destroy(),a[i].highButton=void 0),a[i].lowButton&&(a[i].lowButton.destroy(),a[i].lowButton=void 0);else{if(a[i].highButton)a[i].lowButton.attr({x:y,y:b}),a[i].highButton.attr({x:x,y:w});else{console.log("recreate on graph buttons");var k={},T={};k=a.highBetButtonHover?i.indexOf("spread")>=0?r.image("public/trade-platform/images/graph-up-spread-hover.png",x,w,96,27):r.image("public/trade-platform/images/graph-up-hover.png",x,w,27,27):i.indexOf("spread")>=0?r.image("public/trade-platform/images/graph-up-spread.png",x,w,96,27):r.image("public/trade-platform/images/graph-up.png",x,w,27,27),k.attr({zIndex:"10",id:C}),k.on("click",function(){// if(!highlowApp.graph.isOneClick(model)) {
highlowApp.betSystem.confirmBet("high",t,e.type)}),k.on("mouseover",function(){a.highBetButtonHover=!0,i.indexOf("spread")>=0?$("#"+C).attr("href","public/trade-platform/images/graph-up-spread-hover.png"):$("#"+C).attr("href","public/trade-platform/images/graph-up-hover.png")}),k.on("mouseleave",function(){a.highBetButtonHover=!1,i.indexOf("spread")>=0?$("#"+C).attr("href","public/trade-platform/images/graph-up-spread.png"):$("#"+C).attr("href","public/trade-platform/images/graph-up.png")}),k.add(),k.css({cursor:"pointer"}),a[i].highButton=k,T=a.lowBetButtonHover?i.indexOf("spread")>=0?r.image("public/trade-platform/images/graph-down-spread-hover.png",y,b,96,27):r.image("public/trade-platform/images/graph-down-hover.png",y,b,27,27):i.indexOf("spread")>=0?r.image("public/trade-platform/images/graph-down-spread.png",y,b,96,27):r.image("public/trade-platform/images/graph-down.png",y,b,27,27),T.attr({zIndex:"10",id:A}),T.on("click",function(){// if(!highlowApp.graph.isOneClick(model)) {
highlowApp.betSystem.confirmBet("low",t,e.type)}),T.on("mouseover",function(){a.lowBetButtonHover=!0,i.indexOf("spread")>=0?$("#"+A).attr("href","public/trade-platform/images/graph-down-spread-hover.png"):$("#"+A).attr("href","public/trade-platform/images/graph-down-hover.png")}),T.on("mouseleave",function(){a.lowBetButtonHover=!1,i.indexOf("spread")>=0?$("#"+A).attr("href","public/trade-platform/images/graph-down-spread.png"):$("#"+A).attr("href","public/trade-platform/images/graph-down.png")}),T.add(),T.css({cursor:"pointer"}),a[i].lowButton=T}if(i.indexOf("spread")>=0){var I=r.text('<div class="on-graph-button">'+(t.y+.005).toFixed(3)+"</div>",x+27,w+19);I.on("click",function(){// if(!highlowApp.graph.isOneClick(model)) {
highlowApp.betSystem.confirmBet("high",t,e.type)}),I.on("mouseover",function(){a.highBetButtonHover=!0,i.indexOf("spread")>=0?$("#"+C).attr("href","public/trade-platform/images/graph-up-spread-hover.png"):$("#"+C).attr("href","public/trade-platform/images/graph-up-hover.png")}),I.on("mouseleave",function(){a.highBetButtonHover=!1,i.indexOf("spread")>=0?$("#"+C).attr("href","public/trade-platform/images/graph-up-spread.png"):$("#"+C).attr("href","public/trade-platform/images/graph-up.png")}),I.attr({zIndex:"10",id:"in-chart-spread-high-bet-rate"}),I.css({cursor:"pointer","font-size":"16px;",color:"white"}),I.add();var P=r.text('<div class="on-graph-button">'+(t.y-.005).toFixed(3)+"</div>",y+27,b+19);P.on("click",function(){// if(!highlowApp.graph.isOneClick(model)) {
highlowApp.betSystem.confirmBet("low",t,e.type)}),P.on("mouseover",function(){a.lowBetButtonHover=!0,i.indexOf("spread")>=0?$("#"+A).attr("href","public/trade-platform/images/graph-down-spread-hover.png"):$("#"+A).attr("href","public/trade-platform/images/graph-down-hover.png")}),P.on("mouseleave",function(){a.lowBetButtonHover=!1,i.indexOf("spread")>=0?$("#"+A).attr("href","public/trade-platform/images/graph-down-spread.png"):$("#"+A).attr("href","public/trade-platform/images/graph-down.png")}),P.css({cursor:"pointer","font-size":"16px;",color:"white"}),P.attr({zIndex:"10",id:"in-chart-spread-low-bet-rate"}),P.add(),a[i].highRate=I,a[i].lowRate=P}}},placeBet:function(e){var t=$("#"+e.type+"-graph").highcharts(),a=(t.series[0],t.renderer),i=t.xAxis[0];void 0!=e.marker&&e.marker.destroy();var n=e.point.plotX,r=e.point.plotY,o=n+40,s=r-24,l=o,d=r+4,p=n+28,m=r-48,h=n+28,u=r+40,g=p+21,c=m+12,v=h+21,f=u+12;switch(e.direction){case"high":var x=a.image("public/trade-platform/images/high-lose.png",o,s,21,28);x.css({cursor:"pointer"}),x.attr({zIndex:10}),x.add();var w=a.rect(p,m,43,16,0),y=a.text(e.strike,g,c);break;case"low":var x=a.image("public/trade-platform/images/low-lose.png",l,d,21,28);x.css({cursor:"pointer"}),x.attr({zIndex:10}),x.add();var w=a.rect(h,u,43,16,0),y=a.text(e.strike,v,f)}w.attr({zIndex:14}),w.css({display:"none"}),y.attr({zIndex:14}),y.css({display:"none"}),y.attr({width:"42px","text-anchor":"middle"}),x.on("click",function(){e.expired||highlowApp.betSystem.sellPopup(e)}),x.on("mouseover",function(){e.model.type.indexOf("on-demand")>=0&&!e.expired&&(e.hover=!0,e.model.hoveredBet=e,highlowApp.marketSimulator.updateBetStatus(e.model)),"high"==e.direction?x.css({"-ms-transform-origin":"center bottom","transform-origin":"center bottom","-moz-transform-origin":"center bottom","-webkit-transform-origin":"center bottom","-ms-transform":"scale(1.1,1.1)","-webkit-transform":"scale(1.1,1.1)","-moz-transform":"scale(1.1,1.1)",transform:"scale(1.1,1.1)"}):x.css({"transform-origin":"center top","-moz-transform-origin":"center top","-webkit-transform-origin":"center top","-ms-transform":"scale(1.1,1.1)","-webkit-transform":"scale(1.1,1.1)","-moz-transform":"scale(1.1,1.1)",transform:"scale(1.1,1.1)"}),w.css({display:"block"}),y.css({display:"block"})}),x.on("mouseout",function(){e.model.type.indexOf("on-demand")>=0&&(e.hover=!1,e.model.hoveredBet=void 0,highlowApp.marketSimulator.updateBetStatus(e.model)),x.css({"-ms-transform":"scale(1,1)",transform:"scale(1,1)","-webkit-transform":"scale(1,1)","-moz-transform":"scale(1,1)"}),w.css({display:"none"}),y.css({display:"none"})}),w.attr({zIndex:10}),w.attr({fill:"#161515"}),y.attr({zIndex:11}),w.add(),y.add(),e.markerValueLabel=w,e.markerValueText=y,e.marker=x;var b=e.model;if(b.type.indexOf("on-demand")>=0){{var C=b.type+"-expiry-hint-line";b.type+"-expiry-hint-text"}i.removePlotLine(C),void 0!=b.onDemandHintText&&(b.onDemandHintText.destroy(),b.onDemandHintText=void 0)}},addPoint:function(e,t){var a=this.graphs[e.type],i=a.series[0];i.points[i.points.length-1].update({marker:{enabled:!1}}),i.addPoint(t,!0,!1,!1),this.updateOnGraphUI(e,i.points[i.points.length-1])},prepareGraph:function(e,t){var a={fontFamily:'"Roboto","Helvetica Neue",Helvetica, Arial, sans-serif',fontSize:"10px",color:"white"},i=""+3e5;return t&&(i=""+t),$(e).highcharts({chart:{type:"area",animation:!1,backgroundColor:"#353535",marginTop:6,marginLeft:50,renderTo:"container",style:{fontFamily:'"Roboto","Helvetica Neue",Helvetica, Arial, sans-serif',fontSize:"10px",color:"white",overflow:"visible",zIndex:"4"},startOnTick:!1,endOnTick:!1},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{area:{lineColor:"#ffa200",lineWidth:2,marker:{enabled:!1}},series:{marker:{enabled:!1,states:{hover:{enabled:!1}},zIndex:1e4}}},series:[{color:{linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,"#ffe048"],[1,"#ffc539"]]},fillOpacity:"1",name:"",type:"area",data:[],threshold:null,marker:{enabled:!1}}],yAxis:{labels:{style:a,format:"{value:.3f}"},gridLineWidth:1,gridLineColor:"#202020",tickInterval:.002,tickWidth:0,lineColor:"#202020",lineWidth:1,startOnTick:!1,endOnTick:!0,title:{text:null}},xAxis:{labels:{style:a},minPadding:0,gridLineWidth:1,gridLineColor:"#202020",dateTimeLabelFormats:{second:"%H:%M",minute:"%H:%M",hour:"%H:%M:%S",day:"%H:%M",week:"%H:%M"},ordinal:!1,lineColor:"#202020",lineWidth:1,tickInterval:i,tickWidth:0,type:"datetime",lineColor:"transparent"},title:{text:""},tooltip:{enabled:!1},subtitle:{text:""}})}},highlowApp.heatmap={init:function(){$(".heatmap").on("click",".expander",function(){var e=$($(this).closest(".heatmap")),t=$("#"+e.data("target"));if(e.hasClass("collapsed")){e.removeClass("collapsed"),t.animate({left:"50px"},150),$(".trading-platform-live-graph").addClass("pushed");var a=$(e.closest(".main-view")).data(highlowApp.marketSimulator.modelDataName);highlowApp.graph.loadInstrument(a)}}),$(".heatmap").on("click",".toggle",function(){var e=$($(this).closest(".heatmap")),t=$("#"+e.data("target"));if(!e.hasClass("collapsed")){e.addClass("collapsed"),t.animate({left:"0px"},150),$(".trading-platform-live-graph").removeClass("pushed");var a=$(e.closest(".main-view")).data(highlowApp.marketSimulator.modelDataName);highlowApp.graph.loadInstrument(a)}})}},highlowApp.instrumentPanelCollapser={init:function(){var e=0;$(".instrument-selector-widget").on("click",".instrument-selector-widget-collapse-toggle",function(t){var a=$(this),i=$($(t.target).closest(".instrument-selector-widget")),n=i.find(".page-container"),r=i.find(".instrument-selector-widget-instruments-slider");$instrumentPanels=i.find(".instrument-panel"),a.hasClass("on")?(a.removeClass("on"),n.animate({height:"137px",top:"0px"},e,function(){$instrumentPanels.removeClass("collapsed")}),r.animate({"line-height":"190px"},e)):(a.addClass("on"),n.animate({height:"36px",top:"4px"},e,function(){$instrumentPanels.addClass("collapsed")}),r.animate({"line-height":"108px"},e))})}},highlowApp.currentInstrument={},highlowApp.instrumentPanelSelector={init:function(){var e=this;$(".instrument-panel").click(function(t){var a=$(t.target);$(a.closest(".page-container").find(".instrument-panel-active")).removeClass("instrument-panel-active"),$(this).addClass("instrument-panel-active"),$(".instrument-panel-active"),e.selectInstrument($(this))}),$(".instrument-selector-widget-instruments-container .tab-view-panel.active .instrument-panel-active").each(function(){e.selectInstrument($(this))})},selectInstrument:function(e){var t=(e.data("instrumentLabel"),e.data("instrumentDuration"),e.data("tradingType")),a=e.data("instrumentModel");a&&(void 0!=highlowApp.currentInstrument[t]&&(highlowApp.currentInstrument[t].active=!1),a.active=!0,highlowApp.currentInstrument[t]=a,a.updateMainView(),highlowApp.graph.loadInstrument(a))}},highlowApp.instrumentPanelSlider={slidingTime:500,init:function(){var e=this;$(".page-container").each(function(){var e=$($(this).find(".page.active"));e.next(".page").addClass("next"),e.prev(".page").addClass("prev")}),$(".page-slider.forward").click(function(){highlowApp.instrumentPanelSlider.Sliding||e.nextPage($(this).data("target"))}),$(".page-slider.backward").click(function(){highlowApp.instrumentPanelSlider.Sliding||e.previousPage($(this).data("target"))})},nextPage:function(e){var t=$(e),a=$(t.find(".page.active")),i=$(t.find(".slider-fade-left, .slider-fade-right"));a.next(".page").length>0&&(highlowApp.instrumentPanelSlider.Sliding=!0,i.addClass("in"),a.next(".page").animate({left:0},{duration:highlowApp.instrumentPanelSlider.slidingTime,complete:function(){$(this).addClass("active").removeClass("next"),$(this).next(".page").addClass("next")}}),a.animate({left:"-100%"},{duration:highlowApp.instrumentPanelSlider.slidingTime,complete:function(){$(this).removeClass("active").addClass("prev"),$(this).prev(".page").removeClass("prev"),i.removeClass("in"),highlowApp.instrumentPanelSlider.Sliding=!1}}))},previousPage:function(e){var t=$(e),a=$(t.find(".page.active")),i=$(t.find(".slider-fade-left, .slider-fade-right"));a.prev(".page").length>0&&(highlowApp.instrumentPanelSlider.Sliding=!0,i.addClass("in"),a.prev(".page").animate({left:0},{duration:highlowApp.instrumentPanelSlider.slidingTime,complete:function(){$(this).addClass("active").removeClass("prev"),$(this).prev(".page").addClass("prev")}}),a.animate({left:"100%"},{duration:highlowApp.instrumentPanelSlider.slidingTime,complete:function(){$(this).removeClass("active").addClass("next"),$(this).next(".page").removeClass("next"),i.removeClass("in"),highlowApp.instrumentPanelSlider.Sliding=!1}}))}},highlowApp.marketSimulator={instruments:[],spread:.005,rounding:3,minInterval:1e3,maxInterval:1500,maxChange:8e-4,modelDataName:"instrumentModel",start:function(){for(var e=0;e<this.instruments.length;e++){var t=this.instruments[e];t.update(),t.updateTime()}},simulate:function(e){var t=this,a=highlowApp.randomValue(0,t.maxChange,4),i=.5;e.absoluteChange>0?i+=.1:e.absoluteChange<0&&(i-=.1),e.absoluteChange>.002?i+=.3:e.absoluteChange<.002&&(i-=.3);var n=Math.random()>=i?a:-a;e.previousRate=parseFloat(e.currentRate),e.currentRate=parseFloat(e.currentRate+n),e.absoluteChange+=parseFloat(n),e.type.indexOf("spread")>=0&&(e.upperRate=parseFloat(parseFloat(e.currentRate)+t.spread),e.lowerRate=parseFloat(parseFloat(e.currentRate)-t.spread));var r=(new Date).getTime();e.type.indexOf("on-demand")<0&&r>=e.expireAt-12e4&&(e.dead=!0),e.active&&highlowApp.graph.addPoint(e,{x:r,y:e.currentRate,marker:{enabled:!0,symbol:"url(public/trade-platform/images/graph-marker.png)"},states:{hover:{enabled:!1}},zIndex:10}),e.data.push({x:r,y:e.currentRate,marker:{enabled:!1}}),t.updateUI(e.uid,e),t.updateBetStatus(e)},updateBetStatus:function(e){for(var t=(new Date).getTime(),a=$("#"+e.type+"-graph").highcharts(),i=(a.series[0],a.xAxis[0]),n=a.renderer,r=0;r<e.bets.length;r++){var o=e.bets[r],s=o.marker,l=parseFloat(e.currentRate).toFixed(this.rounding),d=o.point,p=!1,m=parseFloat(o.strike).toFixed(this.rounding),h=!1,u=!1;if(void 0!=o.expireAt&&o.expireAt<t&&!o.expired&&(h=!0,o.expired=!0,o.closingRate=l),u=h||!o.focused,e.active){var g=d.plotX,c=d.plotY,s=o.marker,v=o.markerValueLabel,f=o.markerValueText,x=g+28,w=c-48,y=g+28,b=c+40,C=x+21,A=w+12,k=y+21,T=b+12;switch(o.direction){case"high":s.attr({x:d.plotX+39,y:d.plotY-24}),v.attr({x:x,y:w}),f.attr({x:C,y:A});break;case"low":s.attr({x:d.plotX+39,y:d.plotY+4}),v.attr({x:y,y:b}),f.attr({x:k,y:T})}if(!o.expired){switch(o.direction){case"high":l>m?(s.attr({href:"public/trade-platform/images/high-win.png",zIndex:10}),p=!0):m>=l&&s.attr({href:"public/trade-platform/images/high-lose.png",zIndex:11});break;case"low":l>=m?s.attr({href:"public/trade-platform/images/low-lose.png",zIndex:10}):m>l&&(s.attr({href:"public/trade-platform/images/low-win.png",zIndex:11}),p=!0)}o.focused&&(s.attr({zIndex:14}),$($(o.markerValueLabel.element).parent()).append(o.markerValueLabel.element),$($(o.markerValueText.element).parent()).append(o.markerValueText.element),$($(s.element).parent()).append(s.element))}if(e.type.indexOf("on-demand")>=0){var I=e.type+"-plot-band-"+e.uid+"-"+r,P=e.type+"-start-plot-line-"+e.uid+"-"+r,B=e.type+"-end-plot-line-"+e.uid+"-"+r,S=e.type+"-finish-text-"+e.uid+"_"+r,R=e.type+"-finish-label-"+e.uid+"_"+r;if(o.plotBandId=I,o.startLineId=P,o.endLineId=B,o.finishTextId=S,o.finishLabelId=R,i.removePlotBand(I),i.removePlotLine(P),i.removePlotLine(B),!o.focused&&!o.hover||o.expired)void 0!=o.finishText&&(o.finishText.destroy(),o.finishLabel.destroy(),o.finishText=void 0,o.finishLabel=void 0);else{var M=(d.plotX,Math.floor(i.toPixels(o.expireAt)-17)),z=n.rect(M,52,17,177,0),F=M+12,O=141,L={id:o.finishTextId,transform:"translate(0,0) rotate(270 "+F+" "+O+")",width:"177px","text-anchor":"middle"},D={fill:"#f8f7f5"};o.focused&&!o.hover&&e.hoveredBet?(i.addPlotLine({color:"rgba(255,255,255,0.34)",value:o.betAt,width:1,zIndex:4,id:P}),i.addPlotLine({color:"rgba(255,255,255,0.34)",value:o.expireAt,width:1,zIndex:4,id:B}),D.zIndex="2",L.zIndex="6"):(i.addPlotBand({color:"rgba(20,20,20,0.3)",from:o.betAt,to:o.expireAt,zIndex:1,id:I}),i.addPlotLine({color:"rgba(255,255,255,0.7)",value:o.betAt,width:1,zIndex:1e3,id:P}),i.addPlotLine({color:"rgba(255,255,255,0.7)",value:o.expireAt,width:1,zIndex:4,id:B}),o.hover&&!o.focused?(D.zIndex="15",L.zIndex="15"):(D.zIndex="4",L.zIndex="4"),$($(o.markerValueLabel.element).parent()).append(o.markerValueLabel.element),$($(o.markerValueText.element).parent()).append(o.markerValueText.element),$($(s.element).parent()).append(s.element),s.attr({zIndex:14})),void 0==o.finishLabel?(o.finishLabelId=R,z.attr(D),z.add(),o.finishLabel=z):o.finishLabel.attr({x:M}),void 0==o.finishText?(o.finishTextId=S,text=n.text("loading...",F,O),text.css({"font-family":"Montserrat","font-size":"10px;",color:"#4d5158"}),text.attr(L),text.add(),o.finishText=text):o.finishText.attr({x:F,transform:"translate(0,0) rotate(270 "+F+" "+O+")"}),o.focused&&!o.hover&&e.hoveredBet?(o.finishText.attr({opacity:"0.7"}),o.finishLabel.attr({opacity:"0.34"})):(o.finishText.attr({opacity:"1"}),o.finishLabel.attr({opacity:"1"}))}}}highlowApp.betSystem.updateBetEntry(o,e)}},updateUI:function(e,t){{var a=$('[data-uid="'+e+'"]'),i=(t.type,this);(new Date).getTime()}if(t.type.indexOf("spread")>=0){var n=$(a.find(".instrument-panel-rate.highlow-high")),r=$(a.find(".instrument-panel-rate.highlow-low"));n.html(" "+parseFloat(t.upperRate).toFixed(i.rounding)),r.html(" "+parseFloat(t.lowerRate).toFixed(i.rounding))}else{var o=$(a.find(".instrument-panel-rate"));o.html(" "+parseFloat(t.currentRate).toFixed(i.rounding)),t.currentRate>t.previousRate?o.removeClass("highlow-low").addClass("highlow-high"):t.currentRate<t.previousRate&&o.removeClass("highlow-high").addClass("highlow-low")}},updateRemainingTime:function(e){if(e.type.indexOf("on-demand")<0){var t=$('[data-uid="'+e.uid+'"]'),a=($(t.find(".expiry-time")),(new Date).getTime()),i="",n=e.getMainViewId();remainingTime=e.expireAt-a,i=highlowApp.durationToText(remainingTime),0>=remainingTime&&(e.expired=!0),e.active&&$("#"+n+" .trading-platform-instrument-time-left").html(" "+i)}else this.updateOnDemandBet=function(t,a){var i="EXPIRY: ",r="",o=(new Date).getTime(),s=new Date(t.expireAt-o),l=s.getMinutes(),d=s.getSeconds();l>0?(i+=l>9?l:"0"+l,r+=l>9?l:"0"+l+":",i+=l>1?" MINS ":" MIN "):r+="0:",(d>0||l>0)&&(i+=d>9?d:"0"+d,r+=d>9?d:"0"+d,i+=d>1?" SECS ":" SEC "),(o>=t.expireAt||0>=d&&0>=l)&&(i="EXPIRED",r="expired"),void 0!=t.finishText&&t.finishText.attr({text:i}),e.active&&a&&(n=e.getMainViewId(),$("#"+n+" .trading-platform-instrument-time-left").html(" "+r))},e.focusedBet&&this.updateOnDemandBet(e.focusedBet,!0),e.hoveredBet&&this.updateOnDemandBet(e.hoveredBet)},init:function(){var e=this;$(".js-instrument-panel-original").each(function(){var t={},a=$(this),i=(new Date).getTime();t.label=a.data("instrumentLabel"),t.type=a.data("tradingType"),t.durationLabel=a.data("instrumentDuration"),t.durationId=a.data("instrumentDurationId"),t.duration=a.data("instrumentDurationValue"),t.seedRate=a.data("instrumentSeedRate"),t.payoutRate=a.data("instrumentPayoutRate"),t.currentRate=parseFloat(t.seedRate).toFixed(e.rounding),t.previousrate=t.currentRate,t.bets=[],t.uid=a.data("uid"),t.type.indexOf("on-demand")<0&&(t.openAt=highlowApp.expiring()?i-78e4:1e3*(Math.round(i/3e5)-1)*60*5,t.expireAt=t.openAt+t.duration,9e5==t.duration?t.deadzone=t.expireAt-12e4:36e5==t.duration?t.deadzone=t.expireAt-3e5:864e5==t.duration&&(t.deadzone=t.expireAt-9e5));var n=24e5,r=1e3,o=5e3;t.duration>9e5&&(n=36e5,r=1e4,o=5e4),t.duration>36e5&&(n=144e5,r=4e4,o=2e5),t.startingPoint=i-n,t.absoluteChange=0,t.data=[],t.data.push({x:t.startingPoint,y:t.seedRate});for(var s=t.startingPoint,l=1;i>s;s+=highlowApp.randomValue(r,o),l++){var d=highlowApp.randomValue(0,e.maxChange,4),p=.5;t.absoluteChange>0?p+=.1:t.absoluteChange<0&&(p-=.1),t.absoluteChange>.002?p+=.3:t.absoluteChange<-.002&&(p-=.3);var m=Math.random()>=p?d:-d;t.absoluteChange+=parseFloat(m);var h={x:s,y:t.data[l-1].y+m};t.data.push(h),t.previousRate=t.currentRate,t.currentRate=h.y}"spread"===t.type&&(t.upperRate=parseFloat(t.currentRate+e.spread).toFixed(e.rounding),t.lowerRate=parseFloat(t.currentRate-e.spread).toFixed(e.rounding)),t.getMainViewId=function(){return t.type+"-main-view"},t.updateMainView=function(){var a=t,i=a.getMainViewId();if($("#"+i).data(e.modelDataName,t),$("#"+i+" .trading-platform-instrument-duration").html(" "+a.durationLabel),$("#"+a.type+"-mode .trading-platform-main-controls-payout-rate").html(a.payoutRate),$("#"+i+" .trading-platform-instrument-title, #"+a.type+"-mode .trading-platform-main-controls-instrument-title, .trading-platform-invest-popup."+a.type+" .trading-platform-main-controls-instrument-title").html(" "+a.label),$("#"+i+" .trading-platform-maximum-return").html("$"+parseFloat(a.payoutRate*$("#"+a.type+"-investment-value-input").val()).toFixed(2)),a.active){a.dead?$("#"+a.getMainViewId()).addClass("dead"):$("#"+a.getMainViewId()).removeClass("dead");var n=$("#"+a.getMainViewId()+" .current-rate"),r=$(".trading-platform-invest-popup."+a.type+" .current-rate"),o=$(".trading-platform-sell-popup."+a.type+" .current-rate");a.type.indexOf("on-demand")<0?$("#"+i+" .trading-platform-instrument-closing-time").html(" "+highlowApp.timeToText(a.expireAt)):a.focusedBet&&$("#"+i+" .trading-platform-instrument-closing-time").html(" "+highlowApp.timeToText(a.focusedBet.expireAt)),a.currentRate>a.previousRate?(n.removeClass("highlow-low").addClass("highlow-high"),r.removeClass("highlow-low").addClass("highlow-high"),o.removeClass("highlow-low").addClass("highlow-high")):a.currentRate<a.previousRate&&(n.removeClass("highlow-high").addClass("highlow-low"),r.removeClass("highlow-high").addClass("highlow-low"),o.removeClass("highlow-high").addClass("highlow-low")),n.html(" "+parseFloat(a.currentRate).toFixed(e.rounding)),r.html(" "+parseFloat(a.currentRate).toFixed(e.rounding)),o.html(" "+parseFloat(a.currentRate).toFixed(e.rounding))}},t.update=function(){var a=t;e.simulate(a),a.active&&a.updateMainView(),t.expired&&t.type.indexOf("on-demand")<0&&(t.openAt=1e3*(Math.round(i/3e5)-1)*60*5,t.expireAt=t.openAt+t.duration),setTimeout(a.update,Math.floor(highlowApp.randomValue(e.minInterval,e.maxInterval)))},t.updateTime=function(){var a=t;e.updateRemainingTime(a),t.expired||setTimeout(a.updateTime,1e3)},$('[data-uid="'+a.data("uid")+'"]').data(e.modelDataName,t),$('[data-uid="'+a.data("uid")+'"] .closing-at').html(highlowApp.timeToText(t.expireAt)),e.instruments.push(t)}),e.start()}},highlowApp.numberOnly={init:function(){$(".number-only").keydown(function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})}},highlowApp.oneClick={className:"one-click",init:function(){$(".trading-platform-instrument-one-click-toggler").click(function(){var e=$(this),t=$(".trading-platform, .trading-platform-invest-popup");e.hasClass("active")?($(".trading-platform-instrument-one-click-toggler").removeClass("active"),t.removeClass(highlowApp.oneClick.className)):($(".trading-platform-instrument-one-click-toggler").addClass("active"),t.addClass(highlowApp.oneClick.className))})}},highlowApp.popup={init:function(){console.log("popup init"),$(".trading-platform-popup-wrapper").on("click",".close",function(e){$(e.target).closest(".trading-platform-popup-wrapper").addClass("concealed")}),$(".trading-platform-popup-wrapper").on("click",function(e){$(e.target).closest(".trading-platform-popup-content-inner-wrap").length||$(this).addClass("concealed")}),$(".trading-platform-sell-popup-sell").on("click",function(){$(".trading-platform-sell-popup").addClass("concealed")}),$(".popup-link").click(function(){window.open($(this).attr("href"),"_blank","scrollbars=yes, resizable=yes, top="+($(window).height()-540)/2+", left="+($(window).width()-966)/2+" width=966, height=540")}),$(".trading-activity-popup-root").on("click",".investment-sell-btn",function(){$(".trading-platform-sell-popup").removeClass("concealed")})}},highlowApp.systemMessages={clearMessageTimeout:{},displayMessage:function(e,t){var a=this;clearTimeout(a.clearMessageTimeout),$(".message-wrapper").removeClass("display").removeClass("fail").removeClass("success").removeClass("alert").removeClass("generic").removeClass("warning"),setTimeout(function(){$(".message-wrapper .message").html(t),$(".message-wrapper").addClass(e).addClass("display"),a.clearMessageTimeout=setTimeout(function(){$(".message-wrapper").removeClass("display")},5e3)},100)},init:function(){var e={fail:["Invalid Username or Password","Investment error. Please select Up or Down","Investment error. Please insert correct investment amount","Sell trade action failed","Add trade action failed","Invalid trade action ID","Trade rejected due to stale rate","Sell Price is invalid"],success:["Sell trade action completed successfully","Success"],warning:["General error occurred, please contact a system administrator","Interval between trades is not enough","Not Enough Money","Investment amount is out of the allowed range","Unable to process request, trade rate unavailable","Min Margin Time to Allow Trade","Exceeded the maximum loss per day allowed","General server error","Your account is currently inactive","Please login","Exceed Maximum Trade Actions","Exceed Max Trade Volume","Exceeded Maximum Trader Exposure"]},t=$(".message-triggers .wrapper");for(var a in e)if(e.hasOwnProperty(a)){for(var i=$("<div class='message-trigger-type "+a+"'><div class='message-trigger-type-title'>"+a+"</div></div>"),n=e[a],r=0;r<n.length;r++){var o=n[r].length<=35?n[r]:n[r].substr(0,34)+"&hellip;";i.append($("<div class='message-trigger' data-type='"+a+"' data-message='"+n[r]+"'>"+o+"</div>"))}t.append(i)}t.on("click",".message-trigger",function(){var e=$(this).data("type"),t=$(this).data("message");$(".message-wrapper").removeClass("display").removeClass("fail").removeClass("success").removeClass("alert").removeClass("generic").removeClass("warning"),setTimeout(function(){$(".demo-message .message").html(t),$(".demo-message").addClass(e).addClass("display"),setTimeout(function(){$(".demo-message").removeClass("display")},5e3)},100)}),$(".message-wrapper .close").click(function(){$(".message-wrapper").removeClass("display").removeClass("fail").removeClass("success").removeClass("alert").removeClass("generic").removeClass("warning")}),$(".message-triggers").on("click",".toggle",function(){$(".message-triggers").hasClass("tucked-away")?$(".message-triggers").removeClass("tucked-away"):$(".message-triggers").addClass("tucked-away")})}},highlowApp.tab={init:function(){$(".tab-view").on("click",".tab-view-tab-selector",function(e){$($(e.target).closest(".tab-view").find("> .tab-view-body-wrapper > .tab-view-body > .tab-view-panel")).removeClass("active"),$($(e.target).closest(".tab-view-tab-selectors").find(".tab-view-tab-selector")).removeClass("active"),$($(this).data("target")).addClass("active"),$(this).addClass("active")}),$(".tab-view.instrument-selector-widget").on("click",".tab-view-tab-selector",function(){highlowApp.instrumentPanelSelector.selectInstrument($($(this).data("target")+" .instrument-panel-active"))})}},highlowApp.tooltip={init:function(e){$(".tooltip-container").each(function(){var t=$(this),a=$(t.children(".tooltip"));a.css({display:"none",opacity:0});var i;t.on("mouseover",function(){i=setTimeout(function(){a.css({display:"block"}),a.animate({opacity:1},250)},e)}).on("mouseout",function(){clearTimeout(i),a.animate({opacity:0},250,function(){a.css({display:"none"})})})})}};